[TOC]

# 通知定义

旨在让用户以合适的方式及时获得有用的新消息，帮助用户高效的处理任务。

应用可发送通知消息，用户在通知栏能查看通知内容，也可点击打开应用。

- 显示接收到短消息、即时消息
- 显示应用的推送，如广告、版本更新
- 显示当前正在进行的事件，如下载



# 通知使用

`notificationManager`模块提供通知管理的能力，包括发布、取消发布通知，创建、获取、移除通知通道等能力。

基础类型通知应用于发送短信息、提示信息、广告推送等，支持普通文本、长文本、多行文本，可以通过ContentType指定。



## 更新一个通知

在发出通知后，使用之前使用的相同通知ID，再次调用`notificationManager.publish`来实现通知的更新。如果之前的通知是关闭的，将会创建新通知。



## 移除通知

- 通过通知ID和通知标签取消已发布的通知：`notificationManager.cancel()id`
- 取消所有已发布的通知：`notificationManager.cancelAll()`



## 普通文本类型通知

```typescript
private async sendNotify() {
    try {
      await notificationManager.requestEnableNotification()

      let request: notificationManager.NotificationRequest = {
        id: 100,
        content: {
          notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT,
          normal: {
            title: '学习鸿蒙通知',
            text: '我是学习鸿蒙通知的描述内容。。。。。。'
          }
        }
      }
      await notificationManager.publish(request)
      promptAction.showToast({ message: '发布成功' })
    } catch (e) {
      promptAction.showToast({ message: '发布失败' })
      console.info('发布失败',e)
    }
  }
```



## 通知渠道（SlotType）

- `SlotType.SOCIAL_COMMUNICATION`：社交类型，状态栏中显示通知图标，有横幅和提示音。
- `SlotType.SERVICE_INFORMATION`：服务类型，状态栏中显示通知图标，没有横幅但有提示音。
- `SlotType.CONTENT_INFORMATION`：内容类型，状态栏中显示通知图标，但没有横幅或提示音。
- `SlotType.OTHER_TYPES`：其他类型，状态栏中不显示通知图标，且没有横幅或提示音。



## 创建通知组

将不同类型的通知分为不同的组，以便用户可以更好的管理他们。当同组的通知有多条的时候，会自动折叠起来，避免通知比较多的时候，通知界面比较杂乱，例如当通知栏里有聊天消息通知和商品推荐通知时，我们只需通过设置字段`groupName`，就可以对通知进行分组，给`groupName`设置不同的值可以将通知分为不同的组。



## 为通知添加行为意图

`wantAgent`提供了封装行为意图的能力，主要指拉起指定的应用组件及发布公共事件等能力。给通知添加行为意图后，点击通知后可以拉起指定的`UIAbility`或者发布公共事件。

开发步骤

1. 导入模块
2. 创建`WantAgentInfo`信息。
   1. 拉起UIAbility
   2. 发布公共事件
3. 调用`getWantAgent()`方法进行创建`WantAgent`
4. 构造`NotificationRequest`对象，并发布`WantAgent`通知
5. 用户通过点击通知栏上的通知，系统会自动触发`WantAgent`的动作



# 后台代理提醒

后台代理提醒就是由系统后台进程代理应用的提醒功能。后台代理提醒服务通过`reminderAgentManager`模块提供提醒定义、创建提醒、取消提醒等能力。

后台代理提醒服务提供统一的提醒管理能力，在应用退居后台或退出后，计时和提醒通知功能被系统后台代理接管。